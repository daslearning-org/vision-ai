# main_layout.kv
## import local components
#:import ImgObjDetBox screens.img_obj_detect.ImgObjDetBox
#:import CamObjDetBox screens.cam_obj_detect.CamObjDetBox
#:import ImgClassifytBox screens.img_obj_classify.ImgClassifytBox
#:import ImgSpeciesBox screens.img_species.ImgSpeciesBox
#:import SettingsBox screens.setting.SettingsBox

<DrawerClickableItem@MDNavigationDrawerItem>
    focus_color: "#e7e4c0"
    text_color: "#4a4939"
    icon_color: "#4a4939"
    ripple_color: "#c5bdd2"
    selected_color: "#0c6c4d"

<DrawerLabelItem@MDNavigationDrawerItem>
    text_color: "#4a4939"
    icon_color: "#4a4939"
    focus_behavior: False
    selected_color: "#4a4939"
    _no_ripple_effect: True

<ContentNavigationDrawer>

    MDNavigationDrawerHeader:
        title: "App Menu"
        title_color: "#4a4939"
        spacing: "4dp"
        padding: "12dp", 0, 0, "56dp"

    MDNavigationDrawerLabel:
        text: "Select Operation"

    DrawerClickableItem:
        icon: "car"
        text: "Image Object Detection"
        on_press:
            root.nav_drawer.set_state("close")
            root.screen_manager.current = "imgObjDetect"

    DrawerClickableItem:
        icon: "camera"
        text: "Camera Object Detection"
        on_press:
            root.nav_drawer.set_state("close")
            root.screen_manager.current = "camObjDetect"

    DrawerClickableItem:
        icon: "cat"
        text: "Image Prediction"
        on_press:
            root.nav_drawer.set_state("close")
            root.screen_manager.current = "imgClassify"

    DrawerClickableItem:
        icon: "elephant"
        text: "Identify Species"
        on_press:
            root.nav_drawer.set_state("close")
            root.screen_manager.current = "imgSpecies"

    DrawerClickableItem:
        icon: "wrench"
        text: "Settings & Help"
        on_press:
            root.nav_drawer.set_state("close")
            root.screen_manager.current = "settings"


MDScreen:

    MDBoxLayout: # main container
        orientation: 'vertical'
        spacing: dp(4)

        MDTopAppBar:
            pos_hint: {"top": 1}
            elevation: 4
            title: "Vision AI"
            left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
            md_bg_color: '#7643a8'

        MDNavigationLayout:

            MDScreenManager:
                id: screen_manager

                MDScreen:
                    name: "imgObjDetect"
                    #on_kv_post: app.on_img_obj_detect()
                    on_enter: app.on_img_obj_detect()
                    ImgObjDetBox:
                        id: img_detect_box

                MDScreen:
                    name: "camObjDetect"
                    on_enter: app.on_cam_obj_detect()
                    on_leave: app.on_cam_obj_dt_leave()
                    CamObjDetBox:
                        id: cam_detect_box

                MDScreen:
                    name: "imgClassify"
                    on_enter: app.on_img_classify()
                    ImgClassifytBox:
                        id: img_classify_box

                MDScreen:
                    name: "imgSpecies"
                    on_enter: app.on_img_species()
                    ImgClassifytBox:
                        id: img_species_box

                MDScreen:
                    name: "settings"
                    SettingsBox:
                        id: settings_box

            MDNavigationDrawer:
                id: nav_drawer
                radius: (0, 16, 16, 0)

                ContentNavigationDrawer:
                    screen_manager: screen_manager
                    nav_drawer: nav_drawer
